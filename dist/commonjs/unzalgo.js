"use strict";function _interopRequireDefault(t){return t&&t.__esModule?t:{"default":t}}function getCategory(t){return _categories3["default"][t.codePointAt()]}Object.defineProperty(exports,"__esModule",{value:!0});var _categories2=require("unicode-8.0.0/categories"),_categories3=_interopRequireDefault(_categories2),_statsLite=require("stats-lite"),_statsLite2=_interopRequireDefault(_statsLite),ZALGO_CHARACTER_CATEGORIES=["Mn","Me"],DEFAULT_THRESHOLD=.5;exports["default"]={isZalgo:function(t){var e=arguments.length<=1||void 0===arguments[1]?DEFAULT_THRESHOLD:arguments[1];if(t.length){var r=[],n=!0,a=!1,i=void 0;try{for(var o,l=t.normalize("NFD").split(" ")[Symbol.iterator]();!(n=(o=l.next()).done);n=!0){var u=o.value,f=[],s=!0,v=!1,c=void 0;try{for(var y,g=u[Symbol.iterator]();!(s=(y=g.next()).done);s=!0){var _=y.value,d=getCategory(_);f.push(d)}}catch(h){v=!0,c=h}finally{try{!s&&g["return"]&&g["return"]()}finally{if(v)throw c}}var A=[],E=!0,R=!1,m=void 0;try{for(var L,p=function(){var t=L.value;A.push(f.filter(function(e){return e===t}).length)},C=ZALGO_CHARACTER_CATEGORIES[Symbol.iterator]();!(E=(L=C.next()).done);E=!0)p()}catch(h){R=!0,m=h}finally{try{!E&&C["return"]&&C["return"]()}finally{if(R)throw m}}var T=A.reduce(function(t,e){return t+e})/u.length;r.push(T)}}catch(h){a=!0,i=h}finally{try{!n&&l["return"]&&l["return"]()}finally{if(a)throw i}}if(1===r.length)return r[0]>e;var D=_statsLite2["default"].percentile(r,.75);return D>e}return!1},clean:function(t){var e=arguments.length<=1||void 0===arguments[1]?DEFAULT_THRESHOLD:arguments[1],r="",n=!0,a=!1,i=void 0;try{for(var o,l=t.normalize("NFD").split(/( )/)[Symbol.iterator]();!(n=(o=l.next()).done);n=!0){var u=o.value;if(this.isZalgo(u,e)){var f=!0,s=!1,v=void 0;try{for(var c,y=u[Symbol.iterator]();!(f=(c=y.next()).done);f=!0){var g=c.value;ZALGO_CHARACTER_CATEGORIES.includes(getCategory(g))||(r+=g)}}catch(_){s=!0,v=_}finally{try{!f&&y["return"]&&y["return"]()}finally{if(s)throw v}}}else r+=u}}catch(_){a=!0,i=_}finally{try{!n&&l["return"]&&l["return"]()}finally{if(a)throw i}}return r}};